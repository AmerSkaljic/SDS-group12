parsed.link = link %>%
read_html
name = parsed.link %>%
helper_function(".table-header+ .responsive-table .spielprofil_tooltip")
name = name[1]
#position = parsed.link %>%
#helper_function(".table-header+ .responsive-table .pos-transfer-cell")
from.club = parsed.link %>%
helper_function(".table-header+ .responsive-table .verein-flagge-transfer-cell a")
from.club=from.club[1]
transfer.fee = parsed.link %>%
helper_function(".responsive-table:nth-child(2) .rechts a")
transfer.fee=transfer.fee[1]
return(
data.frame(name = name,
from.club = from.club,
transfer.fee = transfer.fee)
)}
transferPL.df = pl.tranfers.link[1:20] %>%
map_df(scrape_transfer_info)
scrape_transfer_info = function(link){
parsed.link = link %>%
read_html
name = parsed.link %>%
helper_function(".table-header+ .responsive-table .spielprofil_tooltip")
#name = name[1]
#position = parsed.link %>%
#helper_function(".table-header+ .responsive-table .pos-transfer-cell")
from.club = parsed.link %>%
helper_function(".table-header+ .responsive-table .verein-flagge-transfer-cell a")
#from.club=from.club[1]
transfer.fee = parsed.link %>%
helper_function(".responsive-table:nth-child(2) .rechts a")
#transfer.fee=transfer.fee[1]
return(
data.frame(name = name,
from.club = from.club,
transfer.fee = transfer.fee)
)}
transferPL.df = pl.tranfers.link[1:20] %>%
map_df(scrape_transfer_info)
########################################################################################
################################### Test Project #######################################
########################################################################################
#############################################################################################
## NOTES
## DONE:
# created code to gather stats for offensive players
## missing:
# code to gather transferdata
# need to create code til gather stats for defensive players (modification)
# code to combine alle the specific datas?ts
## load libraries
library("rvest")
library("stringr")
library("purrr")
## defines key links
base.link = "http://www.transfermarkt.co.uk/"
pl.tranfers.link = "http://www.transfermarkt.co.uk/premier-league/transfers/wettbewerb/GB1/plus/?saison_id=2015&s_w=&leihe=0&intern=0"
css.selector.profile = ".table-header+ .responsive-table .spielprofil_tooltip"
# helper function
helper_function = function(link, css.select){
out = link %>%
html_nodes(css.select) %>%
html_text
return(out)
}
# scraping function for scrabing tranfer infomation
scrape_transfer_info = function(link){
parsed.link = link %>%
read_html
name = parsed.link %>%
helper_function(".table-header+ .responsive-table .spielprofil_tooltip")
#name = name[1]
#position = parsed.link %>%
#helper_function(".table-header+ .responsive-table .pos-transfer-cell")
from.club = parsed.link %>%
helper_function(".table-header+ .responsive-table .verein-flagge-transfer-cell a")
#from.club=from.club[1]
transfer.fee = parsed.link %>%
helper_function(".responsive-table:nth-child(2) .rechts a")
#transfer.fee=transfer.fee[1]
return(
data.frame(name = name,
from.club = from.club,
transfer.fee = transfer.fee)
)}
# iterate over links, extract data, bind rows
transferPL.df = pl.tranfers.link[1:20] %>%
map_df(scrape_transfer_info)
## load libraries
library("rvest")
library("stringr")
library("purrr")
## defines key links
base.link = "http://www.transfermarkt.co.uk/"
pl.tranfers.link = "http://www.transfermarkt.co.uk/premier-league/transfers/wettbewerb/GB1/plus/?saison_id=2015&s_w=&leihe=0&intern=0"
css.selector.profile = ".table-header+ .responsive-table .spielprofil_tooltip"
# helper function
helper_function = function(link, css.select){
out = link %>%
html_nodes(css.select) %>%
html_text
return(out)
}
# scraping function for scrabing tranfer infomation
scrape_transfer_info = function(link){
parsed.link = link %>%
read_html
name = parsed.link %>%
helper_function(".table-header+ .responsive-table .spielprofil_tooltip")
#name = name[1]
#position = parsed.link %>%
#helper_function(".table-header+ .responsive-table .pos-transfer-cell")
from.club = parsed.link %>%
helper_function(".table-header+ .responsive-table .verein-flagge-transfer-cell a")
#from.club=from.club[1]
transfer.fee = parsed.link %>%
helper_function(".responsive-table:nth-child(2) .rechts a")
#transfer.fee=transfer.fee[1]
return(
data.frame(name = name,
from.club = from.club,
transfer.fee = transfer.fee)
)}
transferPL.df = pl.tranfers.link[1:20] %>%
map_df(scrape_transfer_info)
transferPL.df = pl.tranfers.link[5] %>%
map_df(scrape_transfer_info)
# iterate over links, extract data, bind rows
transferPL.df = pl.tranfers.link%>%
map_df(scrape_transfer_info)
View(transferPL.df)
helper_function = function(link, css.select){
out = link %>%
html_node(css.select) %>%
html_text
return(out)
}
transferPL.df = pl.tranfers.link%>%
map_df(scrape_transfer_info)
helper_function = function(link, css.select){
out = link %>%
html_nodes[i](css.select) %>%
html_text
return(out)
}
transferPL.df = pl.tranfers.link%>%
map_df(scrape_transfer_info)
helper_function = function(link, css.select){
out = link %>%
html_nodes[1](css.select) %>%
html_text
return(out)
}
# iterate over links, extract data, bind rows
transferPL.df = pl.tranfers.link%>%
map_df(scrape_transfer_info)
scrape_transfer_info = function(link){
parsed.link = link %>%
read_html
name = parsed.link %>%
helper_function[1](".table-header+ .responsive-table .spielprofil_tooltip")
#name = name[1]
#position = parsed.link %>%
#helper_function(".table-header+ .responsive-table .pos-transfer-cell")
from.club = parsed.link %>%
helper_function(".table-header+ .responsive-table .verein-flagge-transfer-cell a")
#from.club=from.club[1]
transfer.fee = parsed.link %>%
helper_function(".responsive-table:nth-child(2) .rechts a")
#transfer.fee=transfer.fee[1]
return(
data.frame(name = name,
from.club = from.club,
transfer.fee = transfer.fee)
)}
# iterate over links, extract data, bind rows
transferPL.df = pl.tranfers.link%>%
map_df(scrape_transfer_info)
# iterate over links, extract data, bind rows
transferPL.df = pl.tranfers.link%>%
map_df(scrape_transfer_info)
scrape_transfer_transfer  = function(link){
my.link = link %>%
read_html(encoding = "UTF-8")
name = my.link %>%
html_nodes(".table-header+ .responsive-table .spielprofil_tooltip") %>%
html_text()
name = name[1]
from.club = my.link %>%
html_nodes(".table-header+ .responsive-table .verein-flagge-transfer-cell a") %>%
html_text()
from.club = from.club[1]
transfer.fee = my.link %>%
html_nodes(".responsive-table:nth-child(2) .rechts a") %>%
html_text()
transfer.fee = transfer.fee[1]
return(data.frame (name = name,
from.club = from.club,
transfer.fee = transfer.fee))}
scrape_transfer_transfer = pl.tranfers.link[1:10]  %>%
map_df(scrape_playertransfer)
scrape_transfer_player = pl.tranfers.link[1:10]  %>%
map_df(scrape_transfer)
scrape_transfer  = function(link){
my.link = link %>%
read_html(encoding = "UTF-8")
name = my.link %>%
html_nodes(".table-header+ .responsive-table .spielprofil_tooltip") %>%
html_text()
name = name[1]
from.club = my.link %>%
html_nodes(".table-header+ .responsive-table .verein-flagge-transfer-cell a") %>%
html_text()
from.club = from.club[1]
transfer.fee = my.link %>%
html_nodes(".responsive-table:nth-child(2) .rechts a") %>%
html_text()
transfer.fee = transfer.fee[1]
return(data.frame (name = name,
from.club = from.club,
transfer.fee = transfer.fee))}
scrape_transfer_player = pl.tranfers.link[1:10]  %>%
map_df(scrape_transfer)
## load libraries
library("rvest")
library("stringr")
library("purrr")
## defines key links
base.link = "http://www.transfermarkt.co.uk/"
pl.tranfers.link = "http://www.transfermarkt.co.uk/premier-league/transfers/wettbewerb/GB1/plus/?saison_id=2015&s_w=&leihe=0&intern=0"
css.selector.profile = ".table-header+ .responsive-table .spielprofil_tooltip"
# helper function
helper_function = function(link, css.select){
out = link %>%
html_nodes(css.select) %>%
html_text
return(out)
}
# scraping function for scrabing tranfer infomation
scrape_transfer_info = function(link){
parsed.link = link %>%
read_html
name = parsed.link %>%
helper_function(".table-header+ .responsive-table .spielprofil_tooltip")
#name = name[1]
#position = parsed.link %>%
#helper_function(".table-header+ .responsive-table .pos-transfer-cell")
from.club = parsed.link %>%
helper_function(".table-header+ .responsive-table .verein-flagge-transfer-cell a")
#from.club=from.club[1]
transfer.fee = parsed.link %>%
helper_function(".responsive-table:nth-child(2) .rechts a")
#transfer.fee=transfer.fee[1]
return(
data.frame(name = name,
from.club = from.club,
transfer.fee = transfer.fee)
)}
# iterate over links, extract data, bind rows
transferPL.df = pl.tranfers.link%>%
map_df(scrape_transfer_info)
#try3
scrape_transfer  = function(link){
my.link = link %>%
read_html(encoding = "UTF-8")
name = my.link %>%
html_nodes(".table-header+ .responsive-table .spielprofil_tooltip") %>%
html_text()
name = name[1]
from.club = my.link %>%
html_nodes(".table-header+ .responsive-table .verein-flagge-transfer-cell a") %>%
html_text()
from.club = from.club[1]
transfer.fee = my.link %>%
html_nodes(".responsive-table:nth-child(2) .rechts a") %>%
html_text()
transfer.fee = transfer.fee[1]
return(data.frame (name = name,
from.club = from.club,
transfer.fee = transfer.fee))}
scrape_transfer_player = pl.tranfers.link[1:10]  %>%
map_df(scrape_transfer)
View(transferPL.df)
scrape_transfer  = function(link){
my.link = link %>%
read_html(encoding = "UTF-8")
name = my.link %>%
html_nodes(".table-header+ .responsive-table .spielprofil_tooltip") %>%
html_text()
name = name[1]
from.club = my.link %>%
html_nodes(".table-header+ .responsive-table .verein-flagge-transfer-cell a") %>%
html_text()
from.club = from.club[1]
transfer.fee = my.link %>%
html_nodes(".responsive-table:nth-child(2) .rechts a") %>%
html_text()
transfer.fee = transfer.fee[1]
return(data.frame (name = name,
from.club = from.club,
transfer.fee = transfer.fee))}
scrape_transfer_player = pl.tranfers.link[1:10]  %>%
map_df(scrape_transfer)
getwd
getwd
setwd
?setwd
setwd(/Users/guillaumeslizewicz/Documents/SDS-group12)
getwd
setwd(Users/guillaumeslizewicz/Documents/SDS-group12)
setwd("Users/guillaumeslizewicz/Documents/SDS-group12")
setwd("Users/guillaumeslizewicz/Documents/SDS-group12")
setwd("~/Documents/SDS-group12")
scrape_transfer  = function(link){
my.link = link %>%
read_html(encoding = "UTF-8")
name = my.link %>%
html_nodes(".table-header+ .responsive-table .spielprofil_tooltip") %>%
html_text()
name = name[1]
from.club = my.link %>%
html_nodes(".table-header+ .responsive-table .verein-flagge-transfer-cell a") %>%
html_text()
from.club = from.club[1]
transfer.fee = my.link %>%
html_nodes(".responsive-table:nth-child(2) .rechts a") %>%
html_text()
transfer.fee = transfer.fee[1]
return(data.frame (name = name,
from.club = from.club,
transfer.fee = transfer.fee))}
scrape_transfer_player = pl.tranfers.link[1:10]  %>%
map_df(scrape_transfer)
scrape_transfer  = function(link){
my.link = link %>%
read_html(encoding = "UTF-8")
name = my.link %>%
html_nodes(".table-header+ .responsive-table .spielprofil_tooltip") %>%
html_text()
#name = name[1]
from.club = my.link %>%
html_nodes(".table-header+ .responsive-table .verein-flagge-transfer-cell a") %>%
html_text()
#from.club = from.club[1]
transfer.fee = my.link %>%
html_nodes(".responsive-table:nth-child(2) .rechts a") %>%
html_text()
#transfer.fee = transfer.fee[1]
return(data.frame (name = name,
from.club = from.club,
transfer.fee = transfer.fee))}
scrape_transfer_player = pl.tranfers.link[1:10]  %>%
map_df(scrape_transfer)
df = pl.tranfers.link[1:10]  %>%
map_df(scrape_transfer)
scrape_transfer  = function(link){
my.link = link %>%
read_html(encoding = "UTF-8")
name = my.link %>%
html_nodes(".table-header+ .responsive-table .spielprofil_tooltip") %>%
html_text()
name = name[1]
from.club = my.link %>%
html_nodes(".table-header+ .responsive-table .verein-flagge-transfer-cell a") %>%
html_text()
from.club = from.club[1]
transfer.fee = my.link %>%
html_nodes(".responsive-table:nth-child(2) .rechts a") %>%
html_text()
transfer.fee = transfer.fee[1]
return(data.frame (name = name,
from.club = from.club,
transfer.fee = transfer.fee))}
df = pl.tranfers.link[1:10]  %>%
map_df(scrape_transfer)
df = pl.tranfers.link[1:10]  %>%
map_df(scrape_transfer)
df = pl.tranfers.link  %>%
map_df(scrape_transfer)
View(transferPL.df)
# helper function
helper_function = function(link, css.select){
out = link %>%
html_nodes(css.select) %>%
html_text
return(out)
}
# scraping function for scrabing tranfer infomation
scrape_transfer_info = function(link){
parsed.link = link %>%
read_html
name = parsed.link %>%
helper_function(".table-header+ .responsive-table .spielprofil_tooltip")
#name = name[1]
#position = parsed.link %>%
#helper_function(".table-header+ .responsive-table .pos-transfer-cell")
from.club = parsed.link %>%
helper_function(".table-header+ .responsive-table .verein-flagge-transfer-cell a")
#from.club=from.club[1]
transfer.fee = parsed.link %>%
helper_function(".responsive-table:nth-child(2) .rechts a")
#transfer.fee=transfer.fee[1]
return(
data.frame(name = name,
from.club = from.club,
transfer.fee = transfer.fee)
)}
# iterate over links, extract data, bind rows
transferPL.df = pl.tranfers.link%>%
map_df(scrape_transfer_info)
View(transferPL.df)
# scraping function for scrabing tranfer infomation
scrape_transfer_info = function(link){
parsed.link = link %>%
read_html
name = parsed.link %>%
helper_function(".table-header+ .responsive-table .spielprofil_tooltip")
#position = parsed.link %>%
#helper_function(".table-header+ .responsive-table .pos-transfer-cell")
from.club = parsed.link %>%
helper_function(".table-header+ .responsive-table .verein-flagge-transfer-cell a")
transfer.fee = parsed.link %>%
helper_function(".responsive-table:nth-child(2) .rechts a")
return(
data.frame(name = name,
from.club = from.club,
transfer.fee = transfer.fee)
)}
# iterate over links, extract data, bind rows
transferPL.df = pl.tranfers.link%>%
map_df(scrape_transfer_info)
scrape_transfer_info = function(link){
parsed.link = link %>%
read_html
name = parsed.link %>%
helper_function(".table-header+ .responsive-table .spielprofil_tooltip")
#position = parsed.link %>%
#helper_function(".table-header+ .responsive-table .pos-transfer-cell")
from.club = parsed.link %>%
helper_function(".table-header+ .responsive-table .verein-flagge-transfer-cell a")
transfer.fee = parsed.link %>%
helper_function(".responsive-table:nth-child(2) .rechts a")
return(
data.frame(name = name,
from.club = from.club,
transfer.fee = transfer.fee)
)}
# iterate over links, extract data, bind rows
transferPL.df = pl.tranfers.link%>%
map_df(scrape_transfer_info)
View(transferPL.df)
View(df)
scrape_transfer_info = function(link){
parsed.link = link %>%
read_html
name = parsed.link %>%
helper_function(".table-header+ .responsive-table .spielprofil_tooltip")
#position = parsed.link %>%
#helper_function(".table-header+ .responsive-table .pos-transfer-cell")
from.club = parsed.link %>%
helper_function(".table-header+ .responsive-table .verein-flagge-transfer-cell a")
from.club=from.club[1]
transfer.fee = parsed.link %>%
helper_function(".responsive-table:nth-child(2) .rechts a")
return(
data.frame(name = name,
from.club = from.club,
transfer.fee = transfer.fee)
)}
View(transferPL.df)
scrape_transfer_info = function(link){
parsed.link = link %>%
read_html
name = parsed.link %>%
helper_function(".table-header+ .responsive-table .spielprofil_tooltip")
name=name[1]
#position = parsed.link %>%
#helper_function(".table-header+ .responsive-table .pos-transfer-cell")
from.club = parsed.link %>%
helper_function(".table-header+ .responsive-table .verein-flagge-transfer-cell a")
from.club=from.club[1]
transfer.fee = parsed.link %>%
helper_function(".responsive-table:nth-child(2) .rechts a")
return(
data.frame(name = name,
from.club = from.club,
transfer.fee = transfer.fee)
)}
View(transferPL.df)
scrape_transfer_info = function(link){
parsed.link = link %>%
read_html
name = parsed.link %>%
helper_function(".table-header+ .responsive-table .hide-for-small .spielprofil_tooltip")
#position = parsed.link %>%
#helper_function(".table-header+ .responsive-table .pos-transfer-cell")
from.club = parsed.link %>%
helper_function(".table-header+ .responsive-table .verein-flagge-transfer-cell a")
transfer.fee = parsed.link %>%
helper_function(".responsive-table:nth-child(2) .rechts a")
return(
data.frame(name = name,
from.club = from.club,
transfer.fee = transfer.fee)
)}
View(transferPL.df)
# iterate over links, extract data, bind rows
transferPL.df = pl.tranfers.link%>%
map_df(scrape_transfer_info)
View(transferPL.df)
